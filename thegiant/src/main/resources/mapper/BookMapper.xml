<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.it.mapper.BookMapper">

    <select id="findBooks" parameterType="map" resultType="Book">
        SELECT * FROM book
         <where>
             <if test="title != null and title != ''">
                 title like concat("%",#{title},"%")
             </if>
             <if test="press != null and press != ''">
                 press = #{press}
             </if>
             <if test="author != null and author != ''">
                 author = #{author}
             </if>
         </where>
         order by id desc
         limit #{start},#{bars}
    </select>

    <select id="queryCount" resultType="long" parameterType="map">
        SELECT count(*) FROM book
        <where>
            <if test="title != null and title != ''">
                title like concat("%",#{title},"%")
            </if>
            <if test="press != null and press != ''">
                press = #{press}
            </if>
            <if test="author != null and author != ''">
                author = #{author}
            </if>
        </where>
        order by id desc
    </select>


</mapper>